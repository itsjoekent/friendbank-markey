exports.ids = ["pages-EditPage"];
exports.modules = {

/***/ "./src/frontend/hooks/useAuthGate.js":
/*!*******************************************!*\
  !*** ./src/frontend/hooks/useAuthGate.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useAuthGate; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/auth */ \"./src/frontend/utils/auth.js\");\n/* harmony import */ var _utils_makeLocaleLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/makeLocaleLink */ \"./src/frontend/utils/makeLocaleLink.js\");\n/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../routes */ \"./src/frontend/routes.js\");\n\n\n\n\nfunction useAuthGate() {\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    if (!Object(_utils_auth__WEBPACK_IMPORTED_MODULE_1__[\"isAuthenticated\"])()) {\n      window.location.href = Object(_utils_makeLocaleLink__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"\".concat(_routes__WEBPACK_IMPORTED_MODULE_3__[\"LOGIN_ROUTE\"], \"?\").concat(_routes__WEBPACK_IMPORTED_MODULE_3__[\"NOT_AUTHORIZED_QUERY\"]));\n    }\n  }, []);\n}\n\n//# sourceURL=webpack:///./src/frontend/hooks/useAuthGate.js?");

/***/ }),

/***/ "./src/frontend/pages/EditPage.js":
/*!****************************************!*\
  !*** ./src/frontend/pages/EditPage.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EditPage; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.esm.js\");\n/* harmony import */ var _404__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_404 */ \"./src/frontend/pages/_404.js\");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ApplicationContext */ \"./src/frontend/ApplicationContext.js\");\n/* harmony import */ var _utils_getCopy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/getCopy */ \"./src/frontend/utils/getCopy.js\");\n/* harmony import */ var _components_StandardHelmet__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/StandardHelmet */ \"./src/frontend/components/StandardHelmet.js\");\n/* harmony import */ var _components_SplitScreen__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/SplitScreen */ \"./src/frontend/components/SplitScreen.js\");\n/* harmony import */ var _components_Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/Form */ \"./src/frontend/components/Form.js\");\n/* harmony import */ var _hooks_useAuthGate__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../hooks/useAuthGate */ \"./src/frontend/hooks/useAuthGate.js\");\n/* harmony import */ var _hooks_useGetUserRole__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../hooks/useGetUserRole */ \"./src/frontend/hooks/useGetUserRole.js\");\n/* harmony import */ var _utils_makeFormApiRequest__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils/makeFormApiRequest */ \"./src/frontend/utils/makeFormApiRequest.js\");\n/* harmony import */ var _utils_makeLocaleLink__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../utils/makeLocaleLink */ \"./src/frontend/utils/makeLocaleLink.js\");\n/* harmony import */ var _shared_normalizePageCode__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../shared/normalizePageCode */ \"./src/shared/normalizePageCode.js\");\n/* harmony import */ var _shared_normalizePageCode__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_shared_normalizePageCode__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _components_FormFields__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/FormFields */ \"./src/frontend/components/FormFields.js\");\n/* harmony import */ var _shared_roles__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../shared/roles */ \"./src/shared/roles.js\");\n/* harmony import */ var _shared_roles__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_shared_roles__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../shared/fieldValidations */ \"./src/shared/fieldValidations.js\");\n/* harmony import */ var _shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction EditPage() {\n  Object(_hooks_useAuthGate__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n  var context = Object(_ApplicationContext__WEBPACK_IMPORTED_MODULE_6__[\"useApplicationContext\"])();\n  var role = Object(_hooks_useGetUserRole__WEBPACK_IMPORTED_MODULE_12__[\"default\"])();\n\n  if (!context.page) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_404__WEBPACK_IMPORTED_MODULE_5__[\"default\"], null);\n  }\n\n  var _context$page = context.page,\n      code = _context$page.code,\n      title = _context$page.title,\n      subtitle = _context$page.subtitle,\n      media = _context$page.media,\n      campaignMedia = context.campaignMedia;\n\n  function onPageSubmit(_x) {\n    return _onPageSubmit.apply(this, arguments);\n  }\n\n  function _onPageSubmit() {\n    _onPageSubmit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(formValues) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Object(_utils_makeFormApiRequest__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(\"/api/v1/page/\".concat(code), 'put', formValues);\n\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _onPageSubmit.apply(this, arguments);\n  }\n\n  function onCompletion() {\n    return _onCompletion.apply(this, arguments);\n  }\n\n  function _onCompletion() {\n    _onCompletion = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              window.location.href = Object(_utils_makeLocaleLink__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(\"/\".concat(code));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onCompletion.apply(this, arguments);\n  }\n\n  var mediaOptions = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(campaignMedia);\n\n  if (!mediaOptions.find(function (compare) {\n    return compare._id === media._id;\n  })) {\n    mediaOptions.push(media);\n  }\n\n  var steps = [{\n    title: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('homepage.customizeTitle'),\n    subtitle: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('homepage.customizeSubtitle'),\n    buttonCopy: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('formLabels.submit'),\n    onStepSubmit: onPageSubmit,\n    fields: [{\n      fieldId: 'title',\n      fieldType: _components_FormFields__WEBPACK_IMPORTED_MODULE_16__[\"SINGLE_LINE_TEXT_INPUT\"],\n      label: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('formLabels.title'),\n      defaultValue: title || Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('homepage.defaultTitle'),\n      validator: _shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18__[\"validateTitle\"]\n    }, {\n      fieldId: 'subtitle',\n      fieldType: _components_FormFields__WEBPACK_IMPORTED_MODULE_16__[\"MULTI_LINE_TEXT_INPUT\"],\n      label: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('formLabels.subtitle'),\n      defaultValue: subtitle || Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('homepage.defaultSubtitle'),\n      validator: _shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18__[\"validateSubtitle\"]\n    }, {\n      fieldId: 'background',\n      fieldType: _components_FormFields__WEBPACK_IMPORTED_MODULE_16__[\"GALLERY_PICKER\"],\n      label: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('formLabels.background'),\n      validator: _shared_fieldValidations__WEBPACK_IMPORTED_MODULE_18__[\"validateBackground\"],\n      options: mediaOptions.map(function (item) {\n        return {\n          name: item._id,\n          src: item.source,\n          alt: item.alt\n        };\n      })\n    }]\n  }];\n\n  if (role === _shared_roles__WEBPACK_IMPORTED_MODULE_17__[\"STAFF_ROLE\"]) {\n    steps[0].fields.push({\n      fieldId: 'customBackground',\n      fieldType: _components_FormFields__WEBPACK_IMPORTED_MODULE_16__[\"MEDIA_UPLOAD\"],\n      label: Object(_utils_getCopy__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('formLabels.customBackground'),\n      set: 'background'\n    });\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components_SplitScreen__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    media: media\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components_StandardHelmet__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components_Form__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    formId: \"edit\",\n    initialFieldValues: {\n      title: title,\n      subtitle: subtitle,\n      background: media._id\n    },\n    steps: steps,\n    onCompletion: onCompletion\n  }));\n}\n\n//# sourceURL=webpack:///./src/frontend/pages/EditPage.js?");

/***/ })

};;